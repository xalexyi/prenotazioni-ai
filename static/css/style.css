:root{
  --bg:#0f141a; --panel:#141a22; --card:#151c25; --text:#e7eef7; --muted:#90a0b2;
  --primary:#2d64ff; --primary-600:#1f49c3; --danger:#f05555; --border:#223042;
  --shadow:rgba(0,0,0,.5); --radius:12px; --gap:14px; --z-dropdown:40; --z-modal:50;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* LIGHT */
[data-theme="light"]{
  --bg:#f6f8fb; --panel:#fff; --card:#fff; --text:#0b1220; --muted:#5b6b80; --border:#e4e9f0; --shadow:rgba(10,20,40,.08);
}

*{box-sizing:border-box}
body{margin:0;color:var(--text);background:radial-gradient(1000px 700px at 15% -10%, #143 0%, var(--bg) 55%);min-height:100vh}

/* Header principale (già presente nel tuo base) */

/* Sticky tools sotto l’header */
.sticky-tools{
  position: sticky; top: 60px; z-index: 9;
  display:flex; justify-content:space-between; align-items:center;
  background: var(--panel); border-bottom:1px solid var(--border);
  padding: 10px 16px;
}
.panel-title{margin:0; font-size:16px;}
.live-clock{font-size:12px; color:var(--muted); margin-left:8px}
.tools{display:flex; gap:8px; flex-wrap:wrap;}
.input{width:auto; padding:9px 12px; border:1px solid var(--border); border-radius:10px; background:#0f1723; color:#e6eef9;}
[data-theme="light"] .input{background:#fff; color:#0b1220}
.input--date{min-width:160px}
.search-box{min-width:260px}
.btn{border:0;background:var(--primary);color:#fff;padding:9px 14px;border-radius:999px;cursor:pointer}
.btn:hover{background:var(--primary-600)}
.btn-secondary{background:#2a3646;color:#dce7f4}
[data-theme="light"] .btn-secondary{background:#eef2f8;color:#0b1220}
.btn-danger{background:var(--danger);color:#fff}

/* Cards */
.cards{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--gap);margin:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:0 10px 30px var(--shadow)}
.card__title{color:var(--muted);font-size:13px;margin-bottom:6px}
.card__value{font-size:26px;font-weight:600}
.card--ai .card__ai{font-size:13px;line-height:1.35}

/* Panel & table */
.panel{margin:16px;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius)}
.panel__header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
.panel__body{padding:14px 16px}
.tabs{display:flex;gap:8px}
.tab{border:1px solid var(--border);background:transparent;color:var(--text);padding:8px 12px;border-radius:999px;cursor:pointer}
.tab.is-active{background:var(--primary);color:#fff;border-color:var(--primary)}
.table .tbl{display:grid}
.table .th,.table .tr{display:grid;grid-template-columns:2fr 1.6fr 1.2fr 1fr .8fr 1fr;gap:12px;padding:10px 8px}
.table .th{color:var(--muted);font-size:12px}
.table .tr{border-top:1px solid var(--border)}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--border);font-size:12px}
.badge--ok{background:#173323;border-color:#1f6b3f;color:#b7f3c7}
.badge--wait{background:#332c17;border-color:#6b5b1f;color:#f3e2b7}
.badge--ko{background:#3a1a1a;border-color:#6b1f1f;color:#f3b7b7}

/* Dropdown + Modali (animazioni soft) */
.dropdown__menu{position:fixed;display:none;background:var(--panel);border:1px solid var(--border);border-radius:12px;box-shadow:0 10px 40px var(--shadow);z-index:var(--z-dropdown);padding:6px;transform-origin:top left;opacity:0;transform:translateY(-6px);transition:opacity .12s ease, transform .12s ease}
.dropdown__menu.is-open{display:block;opacity:1;transform:translateY(0)}
.dropdown__item{display:block;width:100%;text-align:left;background:transparent;border:0;color:var(--text);padding:10px 12px;border-radius:8px;cursor:pointer}
.dropdown__item:hover{background:#233244}
[data-theme="light"] .dropdown__item:hover{background:#eef2f8}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:50;opacity:0;transition:opacity .12s ease}
.modal.is-open{display:grid;place-items:center;opacity:1}
.modal__dialog{background:var(--panel);border:1px solid var(--border);border-radius:14px;box-shadow:0 20px 60px var(--shadow);width:96%;max-width:720px;transform:translateY(-8px);transition:transform .16s ease}
.modal.is-open .modal__dialog{transform:translateY(0)}
.modal__header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border)}
.modal__body{padding:14px}
.modal__footer{padding:12px 14px;display:flex;gap:8px;align-items:center;border-top:1px solid var(--border)}
.modal__close{border:0;background:transparent;color:var(--muted);font-size:22px;cursor:pointer}

/* AI insights */
.ai-insights{white-space:pre-line}

/* Responsive */
@media (max-width: 1000px){
  .cards{grid-template-columns:repeat(2,1fr)}
  .table .th,.table .tr{grid-template-columns:1.8fr 1.6fr 1fr 1fr .9fr .9fr}
}
@media (max-width: 700px){
  .cards{grid-template-columns:1fr}
  .tools{gap:6px}
  .search-box{min-width:unset;width:100%}
  .sticky-tools{flex-direction:column;align-items:flex-start;gap:10px}
  .table .th,.table .tr{grid-template-columns:1.8fr 1.2fr .9fr .9fr .7fr .9fr}
}
