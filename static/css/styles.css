/* =============================================================================
   RESET & BASE + THEMING (dark/light)
============================================================================= */

:root {
  --bg: #0c1117;
  --bg-soft: #111826;
  --bg-softer: #0f1522;
  --panel: #0e1624;
  --border: #1f2a3a;
  --border-soft: #223247;

  --text: #e5eaf2;
  --text-dim: #a8b0bf;
  --text-muted: #8693a8;

  --primary: #4c82ff;
  --primary-600: #3a6ef0;
  --primary-700: #2f5fd6;

  --success: #1fc772;
  --success-700: #17a55f;
  --warning: #ffcc47;
  --danger: #ff5c5c;
  --danger-700: #e14a4a;
  --info: #5aa7ff;

  --shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.02);
  --ring: 0 0 0 3px rgba(76,130,255,.25);
  --radius: 14px;
  --radius-sm: 10px;

  --gap-1: .4rem;
  --gap-2: .6rem;
  --gap-3: .8rem;
  --gap-4: 1.0rem;
  --gap-5: 1.25rem;
  --gap-6: 1.5rem;
}

/* Tema chiaro */
html[data-theme="light"] {
  --bg: #f6f8fb;
  --bg-soft: #ffffff;
  --bg-softer: #f3f6fb;
  --panel: #ffffff;
  --border: #d8e0ea;
  --border-soft: #c9d5e4;

  --text: #1a2433;
  --text-dim: #2c3a4d;
  --text-muted: #5a6b82;

  --primary: #2f6bff;
  --primary-600: #2457d9;
  --primary-700: #1b48b8;

  --success: #17a55f;
  --success-700: #11854c;
  --warning: #e6b227;
  --danger: #e14a4a;
  --danger-700: #c53b3b;
  --info: #2b79ff;

  --shadow: 0 6px 20px rgba(0,0,0,.08);
  --ring: 0 0 0 3px rgba(47,107,255,.15);
}

[hidden]{ display:none !important; }
*, *::before, *::after { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: linear-gradient(180deg, var(--bg) 0%, var(--bg-softer) 100%) fixed;
  color: var(--text);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  line-height: 1.45;
}
*{ scrollbar-width: thin; scrollbar-color: #2a3b55 transparent; }
*::-webkit-scrollbar{ height:10px; width:10px; }
*::-webkit-scrollbar-thumb{ background:#2a3b55; border-radius:8px; }
*::-webkit-scrollbar-track{ background: transparent; }

/* =============================================================================
   LAYOUT / HEADER / SIDEBAR
============================================================================= */

.header {
  display:flex; align-items:center; justify-content: space-between;
  gap: var(--gap-4);
  padding: 14px 18px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  position: sticky; top:0; z-index: 30;
}
.header .brand { display:flex; align-items:center; gap:.6rem; font-weight:700; }
.brand-logo{ width:18px; height:18px; }
.brand-name{ font-weight:700; }
.brand-sub{ color: var(--text-muted); margin-left:.4rem; }

.icon-btn {
  background: #17243a;
  border: 1px solid var(--border);
  color: var(--text);
  width: 36px; height: 36px; border-radius: 10px;
  display:grid; place-items:center; cursor:pointer;
}
.icon-btn:hover{ filter:brightness(1.05); }

.actions { display:flex; align-items:center; gap:.6rem; }

.container { padding: 22px; }

/* Sidebar overlay */
.sidebar {
  position: fixed; inset: 0 0 0 auto; width: 300px; max-width:96vw;
  background: var(--bg-softer);
  border-left: 1px solid var(--border);
  padding: 16px;
  z-index: 50;
  box-shadow: -20px 0 50px rgba(0,0,0,.35);
}
.sidebar .sb-head{
  display:flex; align-items:center; justify-content:space-between; margin-bottom:10px;
}
.sidebar .title { font-size:.9rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:.06em; margin:10px 8px 6px; }
.nav{ display:grid; gap:.35rem; }
.nav .nav-link{
  display:flex; align-items:center; gap:.6rem;
  padding:10px 12px; color:var(--text); text-decoration:none;
  border:1px solid transparent; border-radius:10px;
}
.nav .nav-link:hover{ background:#0f1b2c; border-color:var(--border); }
html[data-theme="light"] .nav .nav-link:hover{ background:#e9f0ff; border-color:#d5e1ff; }

.sidebar-backdrop {
  position: fixed; inset: 0; background: rgba(6,10,18,.5); backdrop-filter: blur(2px);
  z-index: 45;
}

/* =============================================================================
   CARDS / KPI / TABLE
============================================================================= */

.card {
  background: var(--bg-soft);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.pad { padding: 18px; }

.kpis { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:14px; margin-bottom:16px; }
.kpi { background: var(--bg-soft); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px; }
.kpi .k { font-size:.86rem; color:var(--text-muted); }
.kpi .v { font-size:1.35rem; margin-top:4px; }

.table {
  width:100%; border-collapse:separate; border-spacing:0; overflow:hidden;
  border-radius: var(--radius); border:1px solid var(--border); background: var(--bg-soft);
}
.table thead th {
  background:#0f1b2c; color:var(--text-dim); font-weight:600; text-align:left; padding:12px 14px; border-bottom:1px solid var(--border);
}
html[data-theme="light"] .table thead th { background:#f0f4ff; }
.table tbody tr{ border-top:1px solid var(--border); background:#0e1624; }
html[data-theme="light"] .table tbody tr{ background:#fff; }
.table tbody tr:hover{ filter:brightness(1.02); }
.table td{ padding:12px 14px; vertical-align:middle; color:var(--text); }

.col-time{ width:140px; white-space:nowrap; }
.col-people{ width:70px; text-align:center; }
.col-state{ width:130px; }
.col-actions{ width:280px; }
.actions-row{ display:flex; align-items:center; gap:8px; flex-wrap:nowrap; }

/* =============================================================================
   FORMS / INPUT / BUTTONS
============================================================================= */

.input, select, textarea, button { font: inherit; }
.input, select, textarea {
  width: 100%; background:#0f192a; border:1px solid var(--border); color:var(--text);
  padding:10px 12px; border-radius:10px; outline:none; transition:border .15s, box-shadow .15s, background .15s;
}
html[data-theme="light"] .input, html[data-theme="light"] select, html[data-theme="light"] textarea {
  background:#fff; border-color:#dbe4f0; color:#1a2433;
}
.input:focus, select:focus, textarea:focus { border-color:#345992; box-shadow: var(--ring); }

.form-row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.form-row > * { flex: 1; min-width: 200px; }

.btn {
  display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  border:1px solid transparent; background:#14233a; color:var(--text);
  padding:10px 14px; border-radius:10px; cursor:pointer; transition:.15s; text-decoration:none; font-weight:600;
}
.btn:hover{ filter:brightness(1.05); }
.btn-primary{ background:var(--primary); border-color:#3f68e5; color:#fff; }
.btn-primary:hover{ background:var(--primary-600); }
.btn-outline{ background:transparent; border-color:#2f4f7b; }
html[data-theme="light"] .btn{ background:#f3f6ff; border-color:#dbe4ff; color:#1a2433; }
html[data-theme="light"] .btn-outline{ background:#fff; border-color:#d1dcf3; }
.btn-danger{ background:var(--danger); border-color:#e74d4d; color:#fff; }
.btn-sm{ padding:7px 10px; border-radius:8px; font-size:.9rem; }

/* =============================================================================
   MODAL
============================================================================= */

.modal-backdrop { position:fixed; inset:0; background:rgba(6,10,18,.65); backdrop-filter:blur(6px); display:grid; place-items:center; padding:22px; z-index:60; }
.modal {
  width:min(720px,96vw); background: linear-gradient(180deg, #0f1523, #0c1422);
  border:1px solid var(--border); border-radius:16px; box-shadow:0 20px 70px rgba(0,0,0,.6);
  overflow:hidden;
}
html[data-theme="light"] .modal { background:#fff; }
.modal-header{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border); background:#0f1726; }
html[data-theme="light"] .modal-header{ background:#f7f9ff; }
.modal-title{ font-weight:700; }
.modal-close{ background:#172136; border:1px solid #273751; color:var(--text); width:34px; height:34px; border-radius:10px; cursor:pointer; }
html[data-theme="light"] .modal-close{ background:#fff; border-color:#dbe4f0; }
.modal-body{ padding:16px; display:grid; gap:12px; }
.modal-footer{ padding:12px 16px; display:flex; justify-content:flex-end; gap:10px; border-top:1px solid var(--border); background:#0f1726; }
html[data-theme="light"] .modal-footer{ background:#f7f9ff; }

/* =============================================================================
   TOGGLE THEME
============================================================================= */
.toggle {
  --h: 30px; height:var(--h); width:56px; background:#1a2740; border:1px solid #243653; border-radius:999px; position:relative; cursor:pointer;
}
.toggle .knob{
  position:absolute; top:50%; left:3px; transform:translateY(-50%);
  height:calc(var(--h) - 8px); width:calc(var(--h) - 8px); border-radius:999px;
  background: linear-gradient(180deg, #f9cc3e, #f7b132); box-shadow:0 4px 14px rgba(0,0,0,.35);
  transition:left .18s ease;
}
.toggle[data-state="on"] .knob{ left: calc(100% - (var(--h) - 8px) - 3px); }

/* =============================================================================
   LOGIN
============================================================================= */
.login-grid{ display:grid; grid-template-columns:1.1fr 1fr; gap:18px; align-items:start; }
.login-card{ background:var(--bg-soft); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px; }
.quick-box{ background: radial-gradient(1200px 600px at -20% -40%, #16355d 0%, transparent 55%), linear-gradient(180deg, #0e1624 0%, #0c1422 80%); border:1px dashed #284164; border-radius:16px; padding:16px; }
.title{ font-weight:700; margin:0 0 8px; }
.text-muted{ color: var(--text-muted); }

/* =============================================================================
   TOAST
============================================================================= */
.toast{ position:fixed; right:18px; bottom:18px; z-index:65; background:#0f1726; border:1px solid var(--border); color:var(--text); border-radius:12px; padding:12px 14px; box-shadow:var(--shadow); }

/* =============================================================================
   UTIL / SECTIONS
============================================================================= */
.w-100{ width:100%; }
.mt-2{ margin-top:.5rem; }
.grid.hours-grid { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:10px; }
.dash-section[active]{ display:block; }
.dash-section[hidden]{ display:none !important; }

/* responsive */
@media (max-width: 1100px){
  .kpis{ grid-template-columns:1fr; }
  .login-grid{ grid-template-columns:1fr; }
}
@media (max-width: 720px){
  .header .center{ display:none; }
  .small-only{ display:flex !important; }
}
.small-only{ display:none; }
