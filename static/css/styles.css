/* ========== Variabili base (dark) ========== */
:root {
  --bg:#0b111a;
  --panel: #0f1622;
  --card: #0f1622;
  --text:#d7e0ea;
  --muted:#9bb1c7;
  --border:#1d2633;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --primary:#335bff;
}

body { margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }

/* Tema chiaro opzionale */
body.theme-light{
  --bg:#f6f8fb;
  --panel:#ffffff;
  --card:#ffffff;
  --text:#1a202c;
  --muted:#4a5568;
  --border:#e2e8f0;
  --shadow:0 10px 24px rgba(16,24,40,.08);
}

/* Header */
.app-header{
  position:sticky; top:0; z-index:60;
  display:flex; align-items:center; justify-content:space-between;
  gap:14px; padding:10px 16px; background:rgba(15,22,34,.8); backdrop-filter:saturate(180%) blur(8px); border-bottom:1px solid var(--border);
}
.hamburger{ background:transparent; border:0; color:var(--text); font-size:20px; cursor:pointer; }
.brand{ display:flex; align-items:center; gap:10px; }
.brand-logo{ width:22px; height:22px; opacity:.9 }
.brand-name{ font-weight:600 }
.brand-sub{ color:var(--muted); margin-left:6px; font-size:.92rem }
.header-actions{ display:flex; align-items:center; gap:10px }

/* Toggle tema */
.theme-toggle{ display:inline-flex; align-items:center; gap:8px; cursor:pointer; }
.theme-toggle input{ display:none }
.toggle-indicator{
  width:42px; height:24px; border-radius:20px; border:1px solid var(--border); background:#1a2433; position:relative; display:inline-block;
}
.theme-toggle input:checked + .toggle-indicator{ background:#e2e8f0; }
.toggle-indicator::after{
  content:""; position:absolute; top:2px; left:2px; width:18px; height:18px; border-radius:50%; background:#fff; transition:left .18s ease;
}
.theme-toggle input:checked + .toggle-indicator::after{ left:22px }

/* Layout */
.container{ max-width:1200px; margin:22px auto; padding:0 16px }
.grid{ display:grid; gap:12px }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
.grow{ flex:1 }
.row{ display:flex }
.right{ margin-left:auto }

/* Card & elements */
.card{ background:var(--card); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow) }
.kpis{ grid-template-columns:2fr 1fr 1fr }
.kpi-bar{ display:flex; align-items:center; justify-content:space-between; padding:14px }
.kpi-small{ padding:14px }
.kpi-sub{ color:var(--muted) }
.kpi-value{ font-size:22px; font-weight:700 }
.status{ display:flex; align-items:center; gap:8px }
.led{ width:8px; height:8px; border-radius:50%; display:inline-block }
.led-green{ background:#35d27f }
.led-purple{ background:#8a5cf6 }

.filters{ padding:12px }
.filter-row{ display:flex; align-items:center; gap:10px }
.date-input{ position:relative }
.calendar-ico{ position:absolute; right:10px; top:50%; transform:translateY(-50%); opacity:.7 }

.input{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#0e141e; color:var(--text);
}
.lbl{ display:flex; flex-direction:column; gap:6px; font-weight:500 }
.check{ display:flex; align-items:center; gap:8px; cursor:pointer }

.btn{ padding:9px 12px; border-radius:10px; border:1px solid var(--border); background:#141b26; color:var(--text); cursor:pointer }
.btn:hover{ filter:brightness(1.06) }
.btn-ghost{ background:transparent; border:1px solid var(--border); color:var(--text) }
.btn-primary{ background:var(--primary); border-color:#2a48d8; color:#fff }
.btn-danger{ background:#e25656; border:1px solid #c44747; color:#fff }

/* Drawer */
.drawer{
  position:fixed; inset:0 auto 0 0; width:320px; background:#0e141d;
  border-right:1px solid var(--border); transform:translateX(-100%);
  transition:transform .2s ease; z-index:70;
}
.drawer.open{ transform:translateX(0) }
.drawer-header{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--border) }
.drawer-nav{ display:flex; flex-direction:column; gap:6px; padding:10px }
.drawer-link{ text-align:left; padding:10px 12px; border-radius:8px; border:1px solid transparent; background:transparent; color:var(--text); cursor:pointer }
.drawer-link:hover{ background:#141b26; border-color:var(--border) }

/* Empty state */
.empty{ padding:18px; text-align:left }
.empty .empty-title{ font-weight:700; margin-bottom:6px }
.pill{ padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:#141b26; color:var(--text) }
.pill.minus{ width:28px; height:28px; line-height:16px; text-align:center }

/* Modal */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; align-items:center; justify-content:center; z-index:80 }
.modal[aria-hidden="true"]{ display:none }
.modal-card{ width:min(920px,96vw); background:var(--card); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow) }
.modal-head{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border) }
.modal-title{ font-weight:700 }
.modal-body{ padding:16px }
.modal-foot{ padding:12px 16px; border-top:1px solid var(--border); display:flex; gap:10px; justify-content:flex-end }

/* Chips */
.chip{ padding:2px 8px; border-radius:999px; border:1px solid var(--border); background:#141b26; font-size:.85rem }

/* Flash */
.flash-stack{ position:fixed; top:72px; left:50%; transform:translateX(-50%); display:grid; gap:8px; z-index:90 }
.alert{ padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#1a2230 }
.alert-warn{ background:#2c1f12; border-color:#5a3b1d; color:#ffda9e }

/* Responsive */
@media (max-width:900px){
  .kpis{ grid-template-columns:1fr }
  .grid-2{ grid-template-columns:1fr }
}
