{% extends "base.html" %}
{% block title %}Dashboard â€” Ristorante AI{% endblock %}
{% block body %}

<div class="app">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="title">Navigazione</div>
    <nav class="nav">
      <a href="#" class="nav-link active" data-panel="reservations">ğŸ“… Prenotazioni</a>
      <a href="#" class="nav-link" data-panel="prices">ğŸ’° Prezzi & Coperti</a>
      <a href="#" class="nav-link" data-panel="menu">ğŸ• Menu digitale</a>
      <a href="#" class="nav-link" data-panel="weekly">ğŸ•’ Orari settimanali</a>
      <a href="#" class="nav-link" data-panel="special">ğŸ‰ Giorni speciali</a>
      <a href="#" class="nav-link" data-panel="stats">ğŸ“Š Statistiche</a>
    </nav>
  </aside>

  <!-- CONTENUTO PRINCIPALE -->
  <div>
    <header class="header">
      <div class="brand">
        <span class="dot"></span>
        <span>Ristorante AI</span>
        <span class="text-dim">Dashboard</span>
      </div>
      <div class="actions">
        <button id="themeToggle" class="toggle" type="button" aria-label="Tema"><span class="knob"></span></button>
        <a href="{{ url_for('logout') }}" class="btn btn-outline">Logout</a>
      </div>
    </header>

    <main class="container">

      <!-- KPI -->
      <div class="kpis">
        <div class="kpi">
          <div class="k">Chiamate attive</div>
          <div class="v">0 / 3</div>
        </div>
        <div class="kpi">
          <div class="k">Prenotazioni oggi</div>
          <div class="v" id="m-res-today">0</div>
        </div>
        <div class="kpi">
          <div class="k">Incasso stimato</div>
          <div class="v" id="m-revenue">0.00 â‚¬</div>
        </div>
      </div>

      <!-- FILTRI -->
      <div class="card pad mb-3">
        <div class="form-row">
          <input id="flt-date" placeholder="gg/mm/aaaa" class="input">
          <input id="flt-q" placeholder="Cerca nome / telefono / orario" class="input">
          <button id="btn-filter" class="btn">Filtra</button>
          <button id="btn-clear" class="btn">Elimina filtri</button>
          <button id="btn-today" class="btn">Oggi</button>
          <button id="btn-new" class="btn btn-primary">+ Nuova prenotazione</button>
        </div>
      </div>

      <!-- LISTA PRENOTAZIONI -->
      <div class="card">
        <table class="table" id="res-table">
          <thead>
            <tr>
              <th>Data</th>
              <th>Ora</th>
              <th>Nome</th>
              <th>Telefono</th>
              <th>Persone</th>
              <th>Stato</th>
              <th class="col-actions">Azioni</th>
            </tr>
          </thead>
          <tbody id="res-tbody">
            <tr><td colspan="7" style="text-align:center;color:var(--text-muted);padding:20px;">Nessuna prenotazione trovata</td></tr>
          </tbody>
        </table>
      </div>

    </main>
  </div>
</div>

<script>
(function(){
  // Toggle tema
  const key="ui:theme"; const btn=document.getElementById("themeToggle");
  function apply(t){document.documentElement.setAttribute("data-theme",t);btn.setAttribute("data-state",t==="light"?"on":"off");}
  const s=localStorage.getItem(key)||"dark";apply(s);
  btn.addEventListener("click",()=>{const n=btn.getAttribute("data-state")==="on"?"dark":"light";localStorage.setItem(key,n);apply(n);});
})();
</script>

{% endblock %}
