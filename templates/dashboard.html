{% extends "base.html" %}
{% block title %}Dashboard — Ristorante AI{% endblock %}
{% block brand %}
  {{ restaurant.name }} <span class="muted">— Dashboard ristorante</span>
{% endblock %}

{% block content %}
<div class="toolbar">
  <button id="sidebarBtn" class="icon-btn">☰</button>
  <div class="stats">
    <div class="stat"><div class="label">Chiamate attive</div><div id="statCalls">0 / 3</div></div>
    <div class="stat"><div class="label">Prenotazioni oggi</div><div id="statBookings">0</div></div>
    <div class="stat"><div class="label">Incasso stimato</div><div id="statRevenue">0 €</div></div>
  </div>
</div>

<div class="filters">
  <label>Data
    <input type="text" id="fDate" placeholder="DD/MM/YYYY" />
  </label>
  <label>Cerca
    <input type="text" id="fSearch" placeholder="Nome / telefono / orario" />
  </label>
  <button id="btnFilter" class="btn">Filtra</button>
  <button id="btnClear" class="btn">Elimina filtri</button>
  <button id="btnToday" class="btn">Oggi</button>
  <button id="btnNew" class="btn btn-primary">+ Nuova prenotazione</button>
</div>

<div class="table">
  <div class="thead">
    <div>Data & Ora</div><div>Cliente</div><div>Telefono</div><div>Pers.</div><div>Stato</div><div>Note</div><div>Azioni</div>
  </div>
  <div id="rows" class="tbody"></div>
</div>

<!-- Modal -->
<div id="modal" class="modal hidden" role="dialog">
  <div class="modal-card">
    <div class="modal-head">
      <h3>Nuova prenotazione</h3>
      <button id="modalClose" class="icon-btn">✕</button>
    </div>
    <div class="modal-body grid2">
      <label>Data
        <input id="mDate" type="text" placeholder="YYYY-MM-DD" />
      </label>
      <label>Ora
        <input id="mTime" type="text" placeholder="HH:MM" />
      </label>
      <label>Nome
        <input id="mName" type="text" />
      </label>
      <label>Telefono
        <input id="mPhone" type="text" />
      </label>
      <label>Persone
        <input id="mPeople" type="number" min="1" value="2" />
      </label>
      <label>Stato
        <select id="mStatus">
          <option value="PENDING">PENDING</option>
          <option value="CONFIRMED">CONFERMATA</option>
          <option value="CANCELLED">CANCELLATA</option>
        </select>
      </label>
      <label class="col2">Note
        <textarea id="mNote" placeholder="Allergie, richieste..."></textarea>
      </label>
    </div>
    <div class="modal-foot">
      <button id="modalCancel" class="btn">Annulla</button>
      <button id="modalSave" class="btn btn-primary">Salva prenotazione</button>
    </div>
  </div>
</div>

<!-- Sidebar drawer -->
<aside id="drawer" class="drawer hidden">
  <div class="drawer-head">
    <div class="title">{{ restaurant.name }}</div>
    <button id="drawerClose" class="icon-btn">✕</button>
  </div>
  <nav class="drawer-nav">
    <div class="group">PRENOTAZIONI</div>
    <a href="{{ url_for('dashboard') }}">Dashboard</a>

    <div class="group">IMPOSTAZIONI RISTORANTE</div>
    <a id="navHours" href="#">Orari di apertura</a>
    <a id="navSpecial" href="#">Giorni speciali / chiusure</a>
    <a id="navPrices" href="#">Prezzi & coperti</a>
    <a id="navMenu" href="#">Menu digitale</a>

    <div class="group">STRUMENTI</div>
    <a id="navStats" href="#">Statistiche & report</a>
  </nav>
</aside>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dashboard_app.js') }}"></script>
{% endblock %}
