<!-- templates/dashboard.html -->
<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard â€” Ristorante AI</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
</head>
<body class="theme-dark">
  <header class="topbar">
    <div class="brand">ðŸ”´ {{ restaurant_name }} â€” <span class="muted">Dashboard ristorante</span></div>
    <div class="top-actions">
      <a class="btn danger" href="{{ url_for('logout') }}">Logout</a>
      <button id="theme-toggle" class="toggle"></button>
    </div>
  </header>

  <main class="container">
    <section class="grid-3">
      <div class="card metric">
        <div class="label">Chiamate attive</div>
        <div class="value">0 / 3</div>
      </div>
      <div class="card metric">
        <div class="label">Prenotazioni oggi</div>
        <div class="value">0</div>
      </div>
      <div class="card metric">
        <div class="label">Incasso stimato</div>
        <div class="value">0 â‚¬</div>
      </div>
    </section>

    <section class="card">
      <div class="row">
        <div class="col">
          <label>Data</label>
          <input id="filter-date" type="text" placeholder="gg/mm/aaaa" />
        </div>
        <div class="col grow">
          <label>Cerca</label>
          <input type="text" placeholder="Nome / telefono / orario" />
        </div>
        <div class="col right">
          <button id="btn-new-reservation" class="btn primary">+ Nuova prenotazione</button>
        </div>
      </div>
    </section>

    <section class="card table">
      <table>
        <thead>
          <tr>
            <th>Data & Ora</th>
            <th>Cliente</th>
            <th>Telefono</th>
            <th>Pers.</th>
            <th>Stato</th>
            <th>Note</th>
            <th>Azioni</th>
          </tr>
        </thead>
        <tbody id="reservations-body"></tbody>
      </table>
    </section>
  </main>

  <!-- MODALE: nuova prenotazione -->
  <div id="modal-new-reservation" class="modal">
    <div class="modal-body">
      <div class="modal-header">
        <h3>Nuova prenotazione</h3>
        <button class="btn icon btn-close">âœ–</button>
      </div>
      <div class="grid-2">
        <div class="col">
          <label>Data</label>
          <input name="date" type="text" placeholder="DD/MM/YYYY" />
        </div>
        <div class="col">
          <label>Ora</label>
          <input name="time" type="text" placeholder="HH:MM" />
        </div>
        <div class="col">
          <label>Nome</label>
          <input name="name" type="text" />
        </div>
        <div class="col">
          <label>Telefono</label>
          <input name="phone" type="text" />
        </div>
        <div class="col">
          <label>Persone</label>
          <input name="people" type="number" min="1" value="2" />
        </div>
        <div class="col">
          <label>Stato</label>
          <select name="status">
            <option>CONFERMATA</option>
            <option>PENDING</option>
            <option>ANNULLATA</option>
          </select>
        </div>
        <div class="col span-2">
          <label>Note</label>
          <textarea name="note" placeholder="Allergie, richieste..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" onclick="document.getElementById('modal-new-reservation').classList.remove('open')">Annulla</button>
        <button class="btn primary btn-save">Salva prenotazione</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/dashboard_app.js') }}"></script>
  <script>
    // toggle tema
    const key='theme', btn=document.getElementById('theme-toggle');
    const apply=(t)=>document.body.classList.toggle('theme-dark', t==='dark');
    apply(localStorage.getItem(key)||'dark');
    btn.addEventListener('click',()=>{const t=document.body.classList.contains('theme-dark')?'light':'dark';localStorage.setItem(key,t);apply(t);});
  </script>
</body>
</html>
